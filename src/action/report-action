#!/usr/bin/env bash

__report_action_bash_clash="${1:?"bash-clash is a required parameter"}"
__report_action_view_dir="${2:?"view-dir is a required parameter"}"

##
# Echos a report view to the $enquirer.
##
action::process_action() {
    source $__report_action_bash_clash $@

    local enquirer=$(bash_clash::get "enquirer")

    if [[ ! -w "$enquirer" ]]; then
        log::error "The enquirer '$enquirer' does not exist."

        return 1 # return to continue execution
    fi

    local uptime=$(date -r $(( $(bash_clash::get "uptime") - 3600 )) +"%-Hh %-Mm %-Ss")
    local queue_pid=$(bash_clash::get "queue_pid")

    # TODO:  look into using `less` here, ala git log
    echo -e "$(source $__report_action_view_dir/report-view)" > $enquirer
}
