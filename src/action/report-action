#!/usr/bin/env bash

# TODO: define actions as services
# - move these, and other statements like it, to the container
__report_action_bash_clash=$(container::resolve "@bash-clash")
__report_action_view_dir=$(container::resolve "@view-dir")

##
# Echos a report view to the $enquirer.
##
action::process_action() {
    source $__report_action_bash_clash "$@"

    local uptime=$(bash_clash::get "uptime")
    local queue_pid=$(bash_clash::get "queue_pid")
    local enquirer=$(bash_clash::get "enquirer")

    uptime=$(date -r $(( $uptime - 3600 )) +"%-Hh %-Mm %-Ss")

    echo -e "$(source $__report_action_view_dir/report-view)" > $enquirer
}
