#!/usr/bin/env bash

# construct the script's dependencies
{
    __parameters=(
        __kill_action_bash_clash=@bash-clash
        @stdout-logger
    )
    source "$SERVICE_LOADER" "$BASH_SOURCE" ${__parameters[*]}
    unset __parameters
}

##
# Exits the current process.
##
action::process_action() {
    source $__kill_action_bash_clash "$@"

    local pipe=$(bash_clash::get "pipe")
    local queue_pid=$(bash_clash::get "queue_pid")
    local enquirer=$(bash_clash::get "enquirer")

    log_slog::info "Killing the queue at '$pipe' (pid: $queue_pid)"

    # exit the current process (the consumer)
    exit 0
}
